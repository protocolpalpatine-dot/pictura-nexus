<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primordia Auction Site</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .auction { border: 1px solid #ccc; padding: 10px; margin-bottom: 20px; }
        .admin-page { display: none; }
        #login-form { margin-bottom: 20px; }
        button { margin-right: 5px; }
    </style>
</head>
<body>
    <h1>Primordia Auction Site</h1>
    <p>Welcome to the reverse auction site where each bid lowers the price! Bids cost $0.10 each (1 dollar for 10 bids).</p>

    <!-- User Section -->
    <div id="user-section">
        <h2>Current Auction</h2>
        <div class="auction">
            <h3 id="item-name">Walmart Gift Card - $50 Value</h3>
            <p>Current Price: $<span id="current-price">100.00</span></p>
            <p>Bids Placed: <span id="bids-count">0</span></p>
            <button onclick="placeBid()">Place Bid (-$1.00)</button>
            <div>
                <label>Auto Bid: <input type="checkbox" id="auto-bid-toggle"></label>
                <label>Stop after <input type="number" id="auto-bid-limit" value="10" min="1"> bids</label>
            </div>
            <p id="bid-status"></p>
        </div>

        <h2>Buy Bids</h2>
        <p>1 dollar = 10 bids</p>
        <input type="number" id="dollars" min="1" value="1">
        <button onclick="buyBids()">Buy Bids</button>
        <p>Your Bids: <span id="user-bids">0</span></p>

        <h2>Profit Calculator</h2>
        <p>Calculate starting price for an item to ensure profit.</p>
        <label>Item Cost: $</label><input type="number" id="item-cost" value="50"><br>
        <label>Expected Bids: </label><input type="number" id="expected-bids" value="100"><br>
        <label>Bid Decrement: $</label><input type="number" id="bid-decrement" value="1" step="0.01"><br>
        <button onclick="calculateStartingPrice()">Calculate</button>
        <p id="calc-result"></p>

        <h2>Shipping Info (If You Win)</h2>
        <p>When you win, enter your shipping address for drop shipping.</p>
        <label>Address: </label><input type="text" id="shipping-address"><br>
        <button onclick="submitShipping()" disabled id="shipping-btn">Submit</button>
    </div>

    <!-- Admin Login -->
    <div id="login-form">
        <h2>Admin Login</h2>
        <label>Password: </label><input type="password" id="admin-password">
        <button onclick="adminLogin()">Login</button>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="admin-page">
        <h2>Admin Panel</h2>
        <button onclick="logoutAdmin()">Logout</button>
        <h3>Auction Queue System</h3>
        <p>Add auctions to the queue. They will start automatically one after another.</p>
        <label>Item Name: </label><input type="text" id="new-item-name"><br>
        <label>Starting Price: $</label><input type="number" id="new-starting-price" step="0.01"><br>
        <label>Item Cost: $</label><input type="number" id="new-item-cost" step="0.01"><br>
        <label>Drop Ship Provider: </label><input type="text" id="drop-ship-provider" value="Example Provider"><br>
        <button onclick="addToQueue()">Add to Queue</button>
        <ul id="auction-queue"></ul>
        <button onclick="startNextAuction()">Start Next Auction Manually</button>
        <p id="admin-status"></p>
    </div>

    <script>
        // User variables
        let currentPrice = 100.00;
        let bidsCount = 0;
        let userBids = 0;
        let autoBidOn = false;
        let autoBidLimit = 10;
        let autoBidsPlaced = 0;
        let auctionActive = true;
        let winner = false;

        // Admin variables
        const adminPass = "admin123"; // Simple password for demo
        let auctionQueue = [];
        let currentAuctionIndex = -1;

        // Place a bid (lowers price)
        function placeBid(isAuto = false) {
            if (!auctionActive) return;
            if (userBids <= 0 && !isAuto) {
                document.getElementById('bid-status').textContent = "No bids left! Buy more.";
                return;
            }
            if (!isAuto) userBids--;
            currentPrice -= 1.00; // Decrement by $1 per bid (configurable)
            bidsCount++;
            autoBidsPlaced = isAuto ? autoBidsPlaced + 1 : 0;
            updateAuctionDisplay();
            document.getElementById('bid-status').textContent = isAuto ? "Auto bid placed!" : "Bid placed! Price lowered.";

            // Check if auto bid should trigger (only if someone else bids, simulate)
            if (!isAuto && autoBidOn && autoBidsPlaced < autoBidLimit) {
                setTimeout(() => placeBid(true), 1000); // Simulate delay
            }

            // Check for win condition (e.g., price reaches a certain low or timer, but for demo, after 50 bids)
            if (bidsCount >= 50) {
                endAuction();
            }
        }

        // Update display
        function updateAuctionDisplay() {
            document.getElementById('current-price').textContent = currentPrice.toFixed(2);
            document.getElementById('bids-count').textContent = bidsCount;
            document.getElementById('user-bids').textContent = userBids;
        }

        // Buy bids
        function buyBids() {
            const dollars = parseInt(document.getElementById('dollars').value);
            userBids += dollars * 10;
            updateAuctionDisplay();
        }

        // Auto bid toggle
        document.getElementById('auto-bid-toggle').addEventListener('change', (e) => {
            autoBidOn = e.target.checked;
            autoBidLimit = parseInt(document.getElementById('auto-bid-limit').value);
            autoBidsPlaced = 0;
        });

        // Calculator
        function calculateStartingPrice() {
            const cost = parseFloat(document.getElementById('item-cost').value);
            const expectedBids = parseInt(document.getElementById('expected-bids').value);
            const decrement = parseFloat(document.getElementById('bid-decrement').value);
            // Profit = (bids * 0.10) + final_price - cost >= 0
            // Final price approx = starting - (expectedBids * decrement)
            // To not lose: starting >= cost - (expectedBids * 0.10) + (expectedBids * decrement)
            const minStarting = cost - (expectedBids * 0.10) + (expectedBids * decrement);
            document.getElementById('calc-result').textContent = `Suggested starting price: $${Math.max(0, minStarting).toFixed(2)} (or lower to incentivize, but risk loss)`;
        }

        // End auction
        function endAuction() {
            auctionActive = false;
            winner = true;
            document.getElementById('bid-status').textContent = "Auction ended! You won at $" + currentPrice.toFixed(2);
            document.getElementById('shipping-btn').disabled = false;
            // Simulate drop shipping initiation
        }

        // Submit shipping
        function submitShipping() {
            const address = document.getElementById('shipping-address').value;
            if (address) {
                alert(`Item will be drop shipped to: ${address}`);
                // In real, integrate with drop ship API
            }
        }

        // Admin login
        function adminLogin() {
            const pass = document.getElementById('admin-password').value;
            if (pass === adminPass) {
                document.getElementById('admin-page').style.display = 'block';
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('user-section').style.display = 'none';
            } else {
                alert("Wrong password!");
            }
        }

        // Logout admin
        function logoutAdmin() {
            document.getElementById('admin-page').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('user-section').style.display = 'block';
        }

        // Add to queue
        function addToQueue() {
            const name = document.getElementById('new-item-name').value;
            const startPrice = parseFloat(document.getElementById('new-starting-price').value);
            const cost = parseFloat(document.getElementById('new-item-cost').value);
            const provider = document.getElementById('drop-ship-provider').value;
            if (name && startPrice && cost) {
                auctionQueue.push({ name, startPrice, cost, provider });
                updateQueueDisplay();
                document.getElementById('admin-status').textContent = "Added to queue!";
            }
        }

        // Update queue display
        function updateQueueDisplay() {
            const ul = document.getElementById('auction-queue');
            ul.innerHTML = '';
            auctionQueue.forEach((item, index) => {
                const li = document.createElement('li');
                li.textContent = `${index + 1}: ${item.name} - Start: $${item.startPrice.toFixed(2)}`;
                ul.appendChild(li);
            });
        }

        // Start next auction automatically or manually
        function startNextAuction() {
            if (currentAuctionIndex < auctionQueue.length - 1) {
                currentAuctionIndex++;
                const next = auctionQueue[currentAuctionIndex];
                document.getElementById('item-name').textContent = next.name + ` (Drop Ship via ${next.provider})`;
                currentPrice = next.startPrice;
                bidsCount = 0;
                auctionActive = true;
                winner = false;
                document.getElementById('shipping-btn').disabled = true;
                updateAuctionDisplay();
                document.getElementById('admin-status').textContent = "Started: " + next.name;
                // Simulate auto start next after end, but for demo, manual
            }
        }

        // Auto start queue on load if admin, but for demo, manual

        updateAuctionDisplay();
    </script>
</body>
</html>
