<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PICTURA NEXUS - Test Fix</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background:#000; color:#0f0; font-family:monospace; padding:20px; }
  button { padding:15px 30px; font-size:20px; margin:10px; cursor:pointer; }
  #log { border:1px solid #0f0; padding:10px; height:200px; overflow-y:auto; background:#111; }
</style>
</head>
<body>
<h1>PICTURA NEXUS - Voice & Button Test</h1>
<p>Click mic â†’ speak. Click buttons. Watch log.</p>

<button id="micBtn" style="background:red;color:white;">ðŸŽ¤ Speak Command</button>
<p id="voiceStatus"></p>

<textarea id="weaveInput" rows="5" cols="60" placeholder="Type manual weave here"></textarea><br>
<button onclick="executeManual()">Execute Manual Weave</button>

<textarea id="evolveRequest" rows="3" cols="60" placeholder="Type evolution request"></textarea><br>
<button onclick="copyForGrok()">Copy Message for Grok</button>

<div id="log">Log starts here...</div>

<script>
// Simple log
function log(msg) {
  const l = document.getElementById('log');
  l.innerHTML += '<div>' + new Date().toLocaleTimeString() + ' - ' + msg + '</div>';
  l.scrollTop = l.scrollHeight;
}

// Manual weave (just echoes for test)
function executeManual() {
  const input = document.getElementById('weaveInput').value.trim();
  if (input) {
    log('Manual weave executed: ' + input);
    alert('Manual weave ran: ' + input.substring(0,50) + '...');
  } else {
    log('No manual input');
  }
}

// Copy for Grok
function copyForGrok() {
  const req = document.getElementById('evolveRequest').value.trim() || "Test request";
  const msg = `Hey Grok, evolve with: ${req}`;
  navigator.clipboard.writeText(msg).then(() => {
    log('Copied to clipboard: ' + msg);
    alert('Message copied! Paste it in chat.');
  }).catch(err => {
    log('Copy failed: ' + err);
    alert('Copy failed - ' + err);
  });
}

// Voice
let recognition;
const micBtn = document.getElementById('micBtn');
micBtn.onclick = () => {
  if (!('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {
    log('Voice not supported');
    return;
  }
  recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recognition.lang = 'en-US';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;

  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    document.getElementById('voiceStatus').textContent = 'Heard: ' + transcript;
    log('Voice: ' + transcript);
    // Simple test action
    alert('Voice command received: ' + transcript);
  };

  recognition.onerror = (event) => log('Voice error: ' + event.error);
  recognition.onend = () => log('Voice ended');

  recognition.start();
  log('Listening...');
};
log('Page loaded - test buttons and mic');
</script>
</body>
</html>
